{% extends "layout.html" %}

{% block content %}
  <div class="page-header">
    <h1>Admin: Teams list</h1>
  </div>
  {% if flash %}
    <div class="alert alert-{{ flash_level }}">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      {{ flash }}
    </div>
  {% endif %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>name</th>
        <th>wins</th>
        <th>losses</th>
        <th>elo</th>
        <th>modify</th>
        <th>delete</th>
      </tr>
    </thead>
    <tbody>
      {% for team in teams %}
        <tr>
          <td>{{ team.id }}</td>
          <td>{{ team.name }}</td>
          <td>{{ team.wins }}</td>
          <td>{{ team.losses }}</td>
          <td>{{ team.elo }}</td>
          <td>
            <form class="form-inline" action="{{ url_for('admin_team_modify', team_id=team.id) }}" method="POST">
              <select name="is_disabled">
                <option value="no" {% if not team.is_disabled %} selected {% endif %}>Enabled</option>
                <option value="yes" {% if team.is_disabled %} selected {% endif %}>Disabled</option>
              </select>
              <select name="must_autoaccept">
                <option value="no" {% if not team.must_autoaccept %} selected {% endif %}>Doesn't auto-accept</option>
                <option value="yes" {% if team.must_autoaccept %} selected {% endif %}>Auto-accept</option>
              </select>
              <input type="submit" class="btn btn-warning" value="Modify">
            </form>
          </td>
          <td>
            {% if team.can_be_deleted() %}
              <form class="form-inline" action="{{ url_for('admin_team_delete', team_id=team.id) }}" method="POST">
                <input type="submit" class="btn btn-danger" value="Delete team">
              </form>
            {% endif %}
          </td>
      {% else %}
        <tr><td colspan=7>No teams yet, create one below</td></tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan=6>
          Create:
          <form class="form-inline" action="{{ url_for('admin_teams_create') }}" method="POST">
            <input type="text" placeholder="Team name" name="team_name">
            <input type="submit" class="btn btn-success" value="Create team">
          </form>
        </td>
      </tr>
    </tfoot>
  </table>
{% endblock %}
